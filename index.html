<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <title>Test</title>
</head>
<body>
  <section id="main">

  </section>
  <section id="kdaevents">

  </section>

<script>
  const es = new EventSource('http://localhost:3000/stream');


  es.addEventListener('update', function (event) {
    document.querySelector('#main').innerHTML = event.data;
    console.log(event.data)
  });


  es.addEventListener('k:update', function (event) {
    const kdaSection = document.querySelector('#kdaevents')

    console.log('event', typeof event.data)
    JSON.parse(event.data).forEach((data) => {
      const div = document.createElement('div');
      div.innerHTML = JSON.stringify(data)
      kdaSection.appendChild(div)
    })
  });


</script>
</body>
</html>
